---
Title: ПЛАН ВПРОВАДЖЕННЯ I18N-ПОЛІТИКИ
Owner: Platform Foundations Guild
Last-Updated: 2025-12-31
---

## 1. Мета
Побудувати довготривалий фундамент для i18n, де ключі мають сталу структуру, розумні неймспейси та чистий стан без дублікатів. Кожна зміна має контролюватися автоматично (pnpm i18n:check, CI, cron) й відповідати i18n/MANIFEST.md.

## 2. Обсяг
- Frontend (Vue 3 + Pinia): `src/i18n/**`, усі модулі, що використовують `t()`
- Backend i18n API (`/i18n/**`)
- CI/CD пайплайн (pre-commit, GitHub Actions)
- Документація та адмінський інструментарій

## 3. Поетапний план
### Етап 1. Фундамент ключів та скрипт контролю чистоти (1 день)
1.1. Задати `src/i18n/locales/uk.json` як єдине джерело правди: зафіксувати структуру, описати правила именування (домен.сабдомен.действие) і зберегти їх у MANIFEST.
1.2. Розширити `scripts/i18n-check.mjs`, щоби він гарантував:
   - підтримку всіх мов із `SUPPORTED_LOCALES`,
   - детекцію дублікатів/колізій ключів, порожніх значень, сирот,
   - статуси: «немає в локалі», «є структура, але пусте значення», «namespace mismatch».
1.3. Завести npm-скрипт `pnpm i18n:check` та хук pre-commit, які обов’язково проганяють перевірку чистоти перед будь-яким комітом.

### Етап 2. Автоматичне блокування бруду (0.5 дня)
2.1. Додати GitHub Actions `i18n-check.yml`, який запускає `pnpm i18n:check --report` та артефактом зберігає журнал помилок.
2.2. Заборонити мердж PR, якщо звіт містить дублікати або порушення неймспейсів; падіння джоби має бути блокером.

### Етап 3. Доменні неймспейси та очистка історичних боргів (1 день)
3.1. Розбити всі ключі на погоджені домени (`calendar.*`, `auth.*`, `notifications.*`, `ui.*`, …) та описати межі в MANIFEST.
3.2. Провести аудит існуючих ключів:
   - видалити або депрекейтнути дублікати з посиланням на новий canonical ключ,
   - виправити ключі, що не відповідають схемі неймспейсів,
   - зафіксувати міграційний план для legacy назв.
3.3. Оновити onboarding-інструкції: як створювати нові ключі, як перевіряти відсутність дублів, як читати звіти pnpm i18n:check.

### Етап 4. Інструмент «Missing translations» (2 дні)
4.1. Backend: endpoint `/i18n/translations/missing/{locale}/` повертає список ключів.
4.2. Frontend admin: таблиця зі статусом ключів, фільтри, експорт CSV.
4.3. Авторизація лише для ролей `i18n_manager`.

### Етап 5. ESLint/AST правило (0.5 дня)
5.1. Власне правило: заборона хардкоджених рядків із uk/en словників у коді.
5.2. Додати до `eslint.config.ts` та CI.

### Етап 6. Авто-звітність (0.5 дня)
6.1. Щотижневий cron-job у CI: запускає `pnpm i18n:check --report`.
6.2. Відправляє звіт у канал `#l10n-status` (Slack webhook).

## 4. Ролі
- **Language Platform Lead** — власник політики, ревʼю плану.
- **Frontend Infra** — імплементація скриптів, ESLint, UI.
- **Backend Infra** — API для missing translations.
- **QA Automation** — smoke-тести admin tooling.

## 5. Deliverables
- `scripts/i18n-check.mjs`, який гарантує чистоту ключів і розумні неймспейси
- npm-скрипт + pre-commit, що блокують коміти з брудом
- CI job `i18n-check` та policy, яка блокує мерджі з дублями
- MANIFEST та onboarding, які описують доменні неймспейси і правила створення ключів
- Admin UI для missing translations з фільтрами по неймспейсах
- ESLint правило проти хардкодів
- Cron-job з тижневим репортом про ключі/дублі/usage

## 6. KPI
- 0 продакшн-релізів із дубльованими або відсутніми ключами
- ≤1% ключів без перекладу після релізу
- ≤5 хв на виявлення та усунення дубліката/помилкового неймспейсу під час ревʼю

## 7. Ризики
- Відсутність перекладачів → накопичення беклогу (мітігація: пріоритизація через weekly report)
- Домени не синхронізовані між продуктами → перед запуском проводимо воркшоп по naming.

## 8. Наступні кроки
- Затвердити план техраді (до 2026-01-03)
- Розбити на тікети в Jira: INFRA-201..INFRA-206
- Призначити відповідальних за кожен етап

## Статус виконання

- [x] Виправити перші 10 відсутніх ключів в uk.json
- [x] Запустити pnpm i18n:check після виправлення
- [ ] Оновити 'Статус виконання' в PLAN.md
