# –ó–≤—ñ—Ç v0.12.0 ‚Äî Engineer (Tools & Automation)

**–î–∞—Ç–∞:** 11.12.2024  
**–†–æ–ª—å:** Third Engineer ‚Äî Tools & Automation  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (5/5 –∑–∞–¥–∞—á)

---

## üìã –í–∏–∫–æ–Ω–∞–Ω—ñ –∑–∞–¥–∞—á—ñ

### TASK A: Automated API Contract Checker ‚úÖ

**–ö–æ–º–∞–Ω–¥–∞:** `python manage.py api_contract_checker`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –ß–∏—Ç–∞—î OpenAPI schema –∑ `/api/schema/`
- –ü–∞—Ä—Å–∏—Ç—å frontend store/services —Ñ–∞–π–ª–∏
- –ó–Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–æ–∑–±—ñ–∂–Ω–æ—Å—Ç—ñ –º—ñ–∂ backend —ñ frontend
- –ì–µ–Ω–µ—Ä—É—î HTML –∑–≤—ñ—Ç

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
```bash
--output reports/api-contract.html  # –®–ª—è—Ö –¥–æ –∑–≤—ñ—Ç—É
--frontend-path ../frontend/src     # –®–ª—è—Ö –¥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É
--schema-url /api/schema/           # URL —Å—Ö–µ–º–∏
--json                              # JSON –∑–∞–º—ñ—Å—Ç—å HTML
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∏:**
- Matched endpoints (backend + frontend)
- Frontend-only calls (–º–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏)
- Backend-only endpoints (–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è)
- Method mismatches (GET vs POST)

**–§–∞–π–ª:** `backend/apps/tools/management/commands/api_contract_checker.py`

---

### TASK B: Whiteboard Stress Tester ‚úÖ

**–ö–æ–º–∞–Ω–¥–∞:** `python manage.py stress_board`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –°–∏–º—É–ª—é—î –º–Ω–æ–∂–∏–Ω–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤ whiteboard
- –¢–µ—Å—Ç—É—î packet-loss, latency, reorder
- –í–∏–º—ñ—Ä—é—î snapshot delay
- –ì–µ–Ω–µ—Ä—É—î JSON –∑–≤—ñ—Ç

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
```bash
--lesson 123        # ID —É—Ä–æ–∫—É
--clients 20        # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–ª—ñ—î–Ω—Ç—ñ–≤
--duration 60       # –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å (—Å–µ–∫)
--packet-loss 0.1   # –°–∏–º—É–ª—è—Ü—ñ—è –≤—Ç—Ä–∞—Ç–∏ –ø–∞–∫–µ—Ç—ñ–≤
--latency 100       # –°–∏–º—É–ª—è—Ü—ñ—è –∑–∞—Ç—Ä–∏–º–∫–∏ (–º—Å)
--reorder 0.05      # –ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è
--chaos             # –í–∏–ø–∞–¥–∫–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
```

**–ú–µ—Ç—Ä–∏–∫–∏:**
- Messages sent/received
- Throughput (msg/s)
- Latency: min, max, avg, p95, p99
- Snapshot count
- Error count

**–§–∞–π–ª:** `backend/apps/tools/management/commands/stress_board.py`

---

### TASK C: Notifications Load Generator ‚úÖ

**–ö–æ–º–∞–Ω–¥–∞:** `python manage.py notif_blast`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –ì–µ–Ω–µ—Ä—É—î –≤–µ–ª–∏–∫—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π
- –ü—ñ–¥—Ç—Ä–∏–º—É—î batch insert –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ
- –†—ñ–∑–Ω—ñ —Ç–∏–ø–∏ –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π
- –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π WebSocket push

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
```bash
--user 42           # ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
--all-users         # –í—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º
--count 1000        # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π
--type lesson.reminder  # –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ç–∏–ø
--delay 10          # –ó–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è–º–∏ (–º—Å)
--batch-size 100    # –†–æ–∑–º—ñ—Ä batch
--push              # –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —á–µ—Ä–µ–∑ WS
--clear             # –û—á–∏—Å—Ç–∏—Ç–∏ —ñ—Å–Ω—É—é—á—ñ
```

**–¢–∏–ø–∏ –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π:**
- `lesson.created`, `lesson.reminder`, `lesson.cancelled`
- `chat.message`
- `relation.invite`, `relation.accepted`
- `system.announcement`, `system.update`

**–§–∞–π–ª:** `backend/apps/tools/management/commands/notif_blast.py`

---

### TASK D: Chat Latency Analyzer ‚úÖ

**–ö–æ–º–∞–Ω–¥–∞:** `python manage.py chat_latency`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –í–∏–º—ñ—Ä—é—î –ª–∞—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å WS —á–∞—Ç—É
- –ì–µ–Ω–µ—Ä—É—î CSV –∑–≤—ñ—Ç
- –ë—É–¥—É—î ASCII –≥—ñ—Å—Ç–æ–≥—Ä–∞–º—É
- –†–æ–∑—Ä–∞—Ö–æ–≤—É—î percentiles

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
```bash
--lesson 123        # ID —É—Ä–æ–∫—É
--messages 100      # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
--duration 60       # –ê–±–æ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å (—Å–µ–∫)
--interval 100      # –Ü–Ω—Ç–µ—Ä–≤–∞–ª –º—ñ–∂ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏ (–º—Å)
--output report.csv # –®–ª—è—Ö –¥–æ CSV
--graph             # ASCII –≥—ñ—Å—Ç–æ–≥—Ä–∞–º–∞
```

**–ú–µ—Ç—Ä–∏–∫–∏:**
- Latency: min, max, avg, median, stdev
- Percentiles: p50, p90, p95, p99
- Messages sent/received
- Total time

**–§–∞–π–ª–∏ –≤–∏—Ö–æ–¥—É:**
- `chat-latency.csv` ‚Äî raw data
- `chat-latency.json` ‚Äî summary

**–§–∞–π–ª:** `backend/apps/tools/management/commands/chat_latency.py`

---

### TASK E: Daily Integrity Scanner ‚úÖ

**–ö–æ–º–∞–Ω–¥–∞:** `python manage.py integrity_scan`

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –ë–î
- –ó–Ω–∞—Ö–æ–¥–∏—Ç—å orphan records
- –í–∏—è–≤–ª—è—î —Ä–æ–∑–±—ñ–∂–Ω–æ—Å—Ç—ñ
- –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
```bash
--fix               # –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏
--output report.json
--verbose           # –î–µ—Ç–∞–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∏:**

| –ö–∞—Ç–µ–≥–æ—Ä—ñ—è | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ |
|-----------|-----------|
| Relations | Orphan tutor/student, duplicates |
| Lessons | Missing relation, invalid times |
| Chat | Orphan messages, no author |
| Notifications | Orphan, stale (>30 days) |
| Snapshots | Missing for completed lessons, empty state |
| Users | No role, inactive with active relations |

**Severity levels:**
- üî¥ Critical ‚Äî –ø–æ—Ç—Ä–µ–±—É—î –Ω–µ–≥–∞–π–Ω–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
- üü° Warning ‚Äî –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞
- üîµ Info ‚Äî —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–µ

**–§–∞–π–ª:** `backend/apps/tools/management/commands/integrity_scan.py`

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
backend/apps/tools/management/commands/
‚îú‚îÄ‚îÄ api_contract_checker.py   # A
‚îú‚îÄ‚îÄ stress_board.py           # B
‚îú‚îÄ‚îÄ notif_blast.py            # C
‚îú‚îÄ‚îÄ chat_latency.py           # D
‚îî‚îÄ‚îÄ integrity_scan.py         # E
```

---

## üîó –ü–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ v0.12.0

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---------|------|
| `api_contract_checker` | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É |
| `stress_board` | –°—Ç—Ä–µ—Å-—Ç–µ—Å—Ç whiteboard |
| `notif_blast` | –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π |
| `chat_latency` | –ê–Ω–∞–ª—ñ–∑ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ —á–∞—Ç—É |
| `integrity_scan` | –°–∫–∞–Ω–µ—Ä —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –ë–î |

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ v0.12.0 Engineer

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–Ω—è |
|---------|----------|
| –ó–∞–¥–∞—á –≤–∏–∫–æ–Ω–∞–Ω–æ | 5/5 |
| Management commands | 5 |
| –†—è–¥–∫—ñ–≤ –∫–æ–¥—É | ~1200 |

---

## üéØ –°—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–∞–±—ñ—Ä —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è:

1. **QA** ‚Äî API contract checker –≤–∏—è–≤–ª—è—î —Ä–æ–∑–±—ñ–∂–Ω–æ—Å—Ç—ñ frontend/backend
2. **Performance** ‚Äî stress_board —Ç–∞ chat_latency –¥–ª—è –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
3. **Load Testing** ‚Äî notif_blast –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
4. **Maintenance** ‚Äî integrity_scan –¥–ª—è —â–æ–¥–µ–Ω–Ω–∏—Ö –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫ –ë–î

–í—Å—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏:
- ‚úÖ CLI-based –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó
- ‚úÖ –ì–µ–Ω–µ—Ä—É—é—Ç—å –∑–≤—ñ—Ç–∏ (HTML/JSON/CSV)
- ‚úÖ –ì–æ—Ç–æ–≤—ñ –¥–ª—è CI/CD —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
- ‚úÖ –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ

---

*M4SH Platform v0.12.0 ‚Äî Engineer Report*
