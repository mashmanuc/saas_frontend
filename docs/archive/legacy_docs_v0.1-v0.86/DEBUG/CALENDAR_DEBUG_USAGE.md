# Calendar Debug Module - –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

## FE-55.DEBUG - –î—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–∏–π –º–æ–¥—É–ª—å –∫–∞–ª–µ–Ω–¥–∞—Ä—è v0.55

### –û–≥–ª—è–¥

–î—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–∏–π –º–æ–¥—É–ª—å –∫–∞–ª–µ–Ω–¥–∞—Ä—è –Ω–∞–¥–∞—î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É, –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –µ–∫—Å–ø–æ—Ä—Ç—É –¥–∞–Ω–∏—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ —Ä–µ–∂–∏–º—ñ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É. –ú–æ–¥—É–ª—å –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ –≤ dev/QA —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö —ñ –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–∑–æ–ª—å–æ–≤–∞–Ω–∏–π –≤—ñ–¥ production –∫–æ–¥—É.

---

## 1. –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –º–æ–¥—É–ª—è

### –ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ feature-flag

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env.local` —É –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó frontend:

```bash
VITE_CALENDAR_DEBUG=true
```

### –ö—Ä–æ–∫ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ dev-—Å–µ—Ä–≤–µ—Ä

```bash
npm run dev
```

–ü—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –º–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è.

---

## 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è UI

### –í—ñ–¥–∫—Ä–∏—Ç—Ç—è Debug Panel

**–í–∞—Ä—ñ–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—ñ**
- –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- –£ –≤–µ—Ä—Ö–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ –∑'—è–≤–∏—Ç—å—Å—è —Ñ—ñ–æ–ª–µ—Ç–æ–≤–∞ –∫–Ω–æ–ø–∫–∞ "Debug"
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –Ω–µ—ó, —â–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏ –ø–∞–Ω–µ–ª—å

**–í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞**
```javascript
window.__M4_DEBUG__.calendar.open()
```

### –ó–∞–∫—Ä–∏—Ç—Ç—è –ø–∞–Ω–µ–ª—ñ

**–í–∞—Ä—ñ–∞–Ω—Ç 1: –ö–Ω–æ–ø–∫–∞ X —É –ø–∞–Ω–µ–ª—ñ**

**–í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å**
```javascript
window.__M4_DEBUG__.calendar.close()
```

---

## 3. –í–∫–ª–∞–¥–∫–∏ Debug Panel

### üìä V0.55 Snapshot
–ü–æ–∫–∞–∑—É—î –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∑ API v0.55:
- **Meta**: tutorId, weekStart, weekEnd, timezone, currentTime, etag
- **Days**: –º–∞—Å–∏–≤ –¥–Ω—ñ–≤ —Ç–∏–∂–Ω—è –∑ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- **Events**: –≤—Å—ñ –ø–æ–¥—ñ—ó (—É—Ä–æ–∫–∏)
- **Accessible**: –¥–æ—Å—Ç—É–ø–Ω—ñ —Å–ª–æ—Ç–∏
- **Blocked Ranges**: –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ –¥—ñ–∞–ø–∞–∑–æ–Ω–∏ —á–∞—Å—É

**–î—ñ—ó:**
- Copy JSON ‚Äî –∫–æ–ø—ñ—é–≤–∞—Ç–∏ —É –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É
- –ó–≥–æ—Ä–Ω—É—Ç–∏/—Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ —Å–µ–∫—Ü—ñ—é

### üóÇÔ∏è Legacy
–ü–æ–∫–∞–∑—É—î –¥–∞–Ω—ñ –∑—ñ —Å—Ç–∞—Ä–æ–≥–æ API (–¥–ª—è –∑–≤–æ—Ä–æ—Ç–Ω–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ):
- weekMeta, days, meta
- eventsById, accessibleById

### üìã Metadata
–í—ñ–¥–æ–±—Ä–∞–∂–∞—î –º–µ—Ç–∞–¥–∞–Ω—ñ —Ç–∞ —Å–ª–æ–≤–Ω–∏–∫–∏:
- **Meta Info**: tutorId, week dates, timezone, etag
- **Dictionaries**: noShowReasons, cancelReasons, blockReasons
- **Statistics**: –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–¥—ñ–π, —Å–ª–æ—Ç—ñ–≤, –ª–æ–≥—ñ–≤

### üìù Logs
–õ–æ–≥–∏ API —Ç–∞ WebSocket –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:

**API Logs:**
- –ú–µ—Ç–æ–¥ (GET/POST/PUT/DELETE)
- URL
- –°—Ç–∞—Ç—É—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (ms)
- –†–æ–∑–º—ñ—Ä payload
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É
- –ü–æ–º–∏–ª–∫–∏ (—è–∫—â–æ —î)

**WebSocket Logs:**
- –¢–∏–ø –ø–æ–¥—ñ—ó (message/error/open/close)
- Timestamp
- Payload
- –ü–æ–º–∏–ª–∫–∏

**–î—ñ—ó:**
- Clear ‚Äî –æ—á–∏—Å—Ç–∏—Ç–∏ –ª–æ–≥–∏
- Copy ‚Äî –∫–æ–ø—ñ—é–≤–∞—Ç–∏ —É –±—É—Ñ–µ—Ä

---

## 4. –ï–∫—Å–ø–æ—Ä—Ç Debug Bundle

### –ß–µ—Ä–µ–∑ UI
–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **"Export"** —É header –ø–∞–Ω–µ–ª—ñ.

–ë—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ JSON —Ñ–∞–π–ª –∑ –Ω–∞–∑–≤–æ—é `calendar-debug-{timestamp}.json`.

### –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å
```javascript
window.__M4_DEBUG__.calendar.export()
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Debug Bundle

```json
{
  "version": "v0.55",
  "exportedAt": "2025-12-29T23:00:00Z",
  "userContext": {
    "role": "tutor",
    "masked": true
  },
  "flags": {
    "calendarDebug": true
  },
  "apiLogs": [...],
  "wsLogs": [...],
  "storeSnapshot": {
    "v055": {...},
    "legacy": {...}
  },
  "metadata": {
    "totalSize": 123456,
    "logsCount": 42,
    "snapshotsCount": 2
  }
}
```

---

## 5. –ì–ª–æ–±–∞–ª—å–Ω–∏–π API (window.__M4_DEBUG__.calendar)

### –î–æ—Å—Ç—É–ø–Ω—ñ –º–µ—Ç–æ–¥–∏

```javascript
// –í—ñ–¥–∫—Ä–∏—Ç–∏ –ø–∞–Ω–µ–ª—å
window.__M4_DEBUG__.calendar.open()

// –ó–∞–∫—Ä–∏—Ç–∏ –ø–∞–Ω–µ–ª—å
window.__M4_DEBUG__.calendar.close()

// –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ debug bundle
window.__M4_DEBUG__.calendar.export()

// –ó–∞—Ö–æ–ø–∏—Ç–∏ snapshot –∑–∞—Ä–∞–∑ (manual trigger)
window.__M4_DEBUG__.calendar.captureNow()
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ E2E —Ç–µ—Å—Ç–∞—Ö (Playwright/Puppeteer)

```javascript
// –£ —Ç–µ—Å—Ç—ñ
await page.evaluate(() => {
  window.__M4_DEBUG__.calendar.captureNow()
})

// –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ
const debugData = await page.evaluate(() => {
  window.__M4_DEBUG__.calendar.export()
  // –û—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –∑ localStorage –∞–±–æ —á–µ—Ä–µ–∑ —ñ–Ω—à–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º
})
```

---

## 6. Flight Recorder (API Logging)

### –©–æ –ª–æ–≥—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

- –í—Å—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ `/api/v1/calendar/*`
- –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É
- –†–æ–∑–º—ñ—Ä payload (–æ–±–º–µ–∂–µ–Ω–æ –¥–æ 50KB –¥–ª—è preview)
- –°—Ç–∞—Ç—É—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É
- –ü–æ–º–∏–ª–∫–∏

### –û–±–º–µ–∂–µ–Ω–Ω—è

- –ú–∞–∫—Å–∏–º—É–º 100 API –ª–æ–≥—ñ–≤ (FIFO)
- –ú–∞–∫—Å–∏–º—É–º 100 WebSocket –ª–æ–≥—ñ–≤ (FIFO)
- Payload preview –æ–±–º–µ–∂–µ–Ω–æ –¥–æ 50KB

### –ú–∞—Å–∫—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–∞—Å–∫—É—é—Ç—å—Å—è:
- email
- phone
- password
- token
- apiKey

–ó–∞–º—ñ—Å—Ç—å –∑–Ω–∞—á–µ–Ω—å –≤–∏–≤–æ–¥–∏—Ç—å—Å—è `***`.

---

## 7. –ë–µ–∑–ø–µ–∫–∞

### ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ

- –ú–æ–¥—É–ª—å **–ù–ï** –ø—Ä–∞—Ü—é—î —É production (flag=false)
- –î–∞–Ω—ñ –º–∞—Å–∫—É—é—Ç—å—Å—è –ø–µ—Ä–µ–¥ –µ–∫—Å–ø–æ—Ä—Ç–æ–º
- –õ–æ–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤ –ø–∞–º'—è—Ç—ñ –±—Ä–∞—É–∑–µ—Ä–∞
- –ù–µ–º–∞—î –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

- –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ debug bundle —Ç—Ä–µ—Ç—ñ–º –æ—Å–æ–±–∞–º –±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ, —â–æ —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ –∑–∞–º–∞—Å–∫–æ–≤–∞–Ω—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç—ñ–ª—å–∫–∏ –≤ dev/QA —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö

---

## 8. Troubleshooting

### –ü–∞–Ω–µ–ª—å –Ω–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:**
1. `VITE_CALENDAR_DEBUG=true` —É `.env.local`
2. Dev-—Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ `.env`
3. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫

### –õ–æ–≥–∏ –Ω–µ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:**
1. Axios interceptors –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ (–ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ `apiClient.js`)
2. –ó–∞–ø–∏—Ç–∏ –π–¥—É—Ç—å –¥–æ `/api/v1/calendar/*`
3. Feature-flag –∞–∫—Ç–∏–≤–Ω–∏–π

### Bundle –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–∏–π

**–†—ñ—à–µ–Ω–Ω—è:**
1. –û—á–∏—Å—Ç—ñ—Ç—å –ª–æ–≥–∏ (–∫–Ω–æ–ø–∫–∞ "Clear All")
2. –ï–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–∞–Ω—ñ
3. –ó–º–µ–Ω—à—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å–∞–Ω–∏—Ö snapshots

---

## 9. –†–æ–∑—Ä–æ–±–∫–∞ —Ç–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è

### –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ –≤–∫–ª–∞–¥–∫–∏

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `CalendarDebugPanel.vue`:

```typescript
const tabs = [
  { id: 'snapshot', label: 'V0.55 Snapshot' },
  { id: 'legacy', label: 'Legacy' },
  { id: 'metadata', label: 'Metadata' },
  { id: 'logs', label: 'Logs' },
  { id: 'custom', label: 'Custom' }, // –Ω–æ–≤–∞ –≤–∫–ª–∞–¥–∫–∞
]
```

–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `CustomSection.vue` —É `debug/components/`.

### –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ –ª–æ–≥–∏

–£ `calendarDebugRecorder.ts`:

```typescript
recordCustomEvent(type: string, payload: any) {
  // –í–∞—à–∞ –ª–æ–≥—ñ–∫–∞
}
```

---

## 10. FAQ

**Q: –ß–∏ –ø—Ä–∞—Ü—é—î –º–æ–¥—É–ª—å —É production?**  
A: –ù—ñ, –º–æ–¥—É–ª—å –ø–æ–≤–Ω—ñ—Å—Ç—é –≤—ñ–¥–∫–ª—é—á–µ–Ω–∏–π —É production —á–µ—Ä–µ–∑ feature-flag.

**Q: –ß–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è —ñ–Ω—à–∏—Ö –º–æ–¥—É–ª—ñ–≤?**  
A: –¢–∞–∫, –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∞–Ω–∞–ª–æ–≥—ñ—á–Ω—ñ debug –º–æ–¥—É–ª—ñ –¥–ª—è —ñ–Ω—à–∏—Ö —á–∞—Å—Ç–∏–Ω –¥–æ–¥–∞—Ç–∫—É.

**Q: –°–∫—ñ–ª—å–∫–∏ –¥–∞–Ω–∏—Ö –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è?**  
A: –î–æ 100 API –ª–æ–≥—ñ–≤, 100 WS –ª–æ–≥—ñ–≤, 10 snapshots. –°—Ç–∞—Ä—ñ –¥–∞–Ω—ñ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ (FIFO).

**Q: –ß–∏ –≤–ø–ª–∏–≤–∞—î –º–æ–¥—É–ª—å –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å?**  
A: –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–æ. –£ production –∫–æ–¥ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –≤–∑–∞–≥–∞–ª—ñ (tree-shaking).

---

## –ö–æ–Ω—Ç–∞–∫—Ç–∏

–î–ª—è –ø–∏—Ç–∞–Ω—å —Ç–∞ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π:
- –°—Ç–≤–æ—Ä—ñ—Ç—å issue —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
- –ù–∞–ø–∏—à—ñ—Ç—å —É Slack –∫–∞–Ω–∞–ª #dev-frontend
- –ó–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –∫–æ–º–∞–Ω–¥–∏ Calendar v0.55

---

**–í–µ—Ä—Å—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó:** 1.0  
**–î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 2025-12-29  
**–ú–æ–¥—É–ª—å:** FE-55.DEBUG
