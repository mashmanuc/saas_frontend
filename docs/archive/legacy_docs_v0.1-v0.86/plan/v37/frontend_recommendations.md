# План v37 — фронтенд-рекомендації

> Базуємося на аудиті Marketplace / Classroom до ТЗ36. Нижче — речі, які ще варто докрутити, аби студентський і т’юторський досвід був стабільним і готовим до production-релізу.

## 1. Стійкість даних та API-клієнт
1. **Єдиний шар нормалізації Marketplace** — винести helper `fetchFirstOk` та мапінг опцій у спільний утилітний модуль, щоб API та Pinia-store не дублювали конверсії. Так легше тримати сумісність із різними backend-роутами.
2. **Кеш/TTL для фільтрів** — Pinia store має зберігати фільтри й не робити повторні запити при кожному переході між каталогом і профілем. Додати стратегію TTL + форс-оновлення з кнопки "Оновити дані".
3. **Fallback для профілю** — зараз компонентно ми захистилися від `undefined`, але варто додати сервісне поле `profile.completeness`, щоб одразу розуміти, що саме випадало з бекенду, і показувати targeted пусті стани.

## 2. UX Marketplace / профіль т’ютора
1. **Skeleton-и та error-boundaries** — при повільній мережі сторінка стрибає. Додати skeleton-блоки для `ProfileHeader`, `ProfileAbout`, `ProfileReviews` + компактні повідомлення помилок.
2. **Lazy-завантаження hefty блоків** — відео-прев’ю, відгуки та сертифікати краще підвантажувати окремими чанками через `defineAsyncComponent`, щоб зменшити перший рендер.
3. **Адаптація для мобайлу** — перевірити в `TutorProfileView` і редакторі профілю spacing/типографіку, бо зараз великі паддінги й фіксовані ширини не влізають на 360px. Потрібен окремий mobile-лейаут для форм (subject pills, badges, прайс-блок).
4. **Нагороди/бейджі** — новий ключ `badgesTitle` вже є, але в UI бракує контенту: додати легке пояснення + CTA "Як отримати бейдж" із переходом на довідку.

## 3. Marketplace Editor
1. **Автозбереження чернетки** — зараз втрачати дані легко. Варто додати локальний autosave (debounce + localStorage) і маркер "Чернетку збережено".
2. **Багатокроковий флоу** — форма велика; логічно розбити на кроки (Основна інформація → Предмети → Ціни → Сертифікати) з прогрес-баром. Це зменшить когнітивне навантаження й пам’ять у браузері.
3. **Валідація i18n** — helper `tr()` уже додали, але потрібно пройтись по всіх кнопках/label-ах, щоб ніде не було `t(...) || 'text'`. Це підготує інтерфейс до наступних локалізацій.

## 4. Classroom / тести (прямі залежності фронту)
1. **Undo/redo у board store** — повернути regression-тест, що ловив зламаний стек дій. Без цього UI classroom буде хитким.
2. **LessonList submit** — відновити покриття тестами для DOM wrapper і кнопки сабміту, щоб форма не зламалась при майбутніх правках у Vite/Vue 3.4.
3. **Board Sync warnings** — UI все ще сипле попередженнями в консолі; треба вичистити санітайзери payload-ів, щоб не втрачати продуктивність.

## 5. Інфраструктура та продуктивність
1. **Dev-пам'ять** — 1.4 ГБ у dev-режимі прийнятно, але можна розбити Marketplace на маршрути з динамічним імпортом і винести тяжкі залежності (vue-i18n, chart.js) у окремі чанки. Це пришвидшить cold start.
2. **Performance-бюджет** — додати Lighthouse CI / Web Vitals у pipeline, щоб зловити регресії до релізу.
3. **Storybook/Playwright** — для ключових компонентів (Rating, PriceTag, ProfileHeader, Editor steps) потрібні інтерактивні сторі та smoke-тести. Це зменшить ручний регрес при майбутніх ТЗ.

---
Ці рекомендації можна використати як основу "версії 37" плану: вони опираються на вже виконаний аудит і вказують на найбільш болючі зони, які ще не були формально описані у попередніх ТЗ.
