# Звіт по фронтенду v0.9.0

## 1. Що реалізовано у v0.9.0

### Relations Dashboard v3
- Створено оновлений `relationsStore` з курсорною пагінацією (`cursor`, `has_more`, `loadMore`), підтримкою фільтрації статусів і чітким відокремленням state длЯ репетитора/студента.
- Додано обробку всіх типів помилок (offline / 429 rate-limit / backend) та локалізовані повідомлення через `i18n`.
- Інтерфейс тьютора в `DashboardTutor.vue` відображає повний контракт бекенду: студент, таймзона, activity, counters, масові дії (bulk accept/archive) з нотифікаціями.
- Порожні стани реалізовано для invited/active/archived, кожен має локалізовані тексти.

### Lessons Module + Calendar
- `lessonStore` працює виключно в UTC, а всі дати конвертуються в timezone користувача (через `dayjs.utc` + `tz`), що покриває вимогу 2.2.
- Калібровано статуси `scheduled/completed/cancelled`, додано статус-фільтр у `LessonList.vue` із опціями для ролей.
- Реалізовано створення, рескейл і скасування уроків. Метод `fetchLessons` включає `status`, `from`, `to`, та гарантує нормалізацію уроків для FullCalendar.
- Додано polling кожні 30 секунд, а також додаткові тести (`LessonList.spec.js`, `lessonStore.spec.js`) для статусів, UTC-хендлінгу та поведінки банера часткових даних.
- Розв’язано проблему Vitest з CSS FullCalendar (власний Vite-плагін + глобальні стилі), усі тести проходять.

### Dev Theme Playground
- Створено маршрут `/dev/theme`, доступний для admin/superadmin.
- Playground демонструє всі обов’язкові компоненти (Button, Input, Card, Modal, Badge, Table, Select, Alert), має перемикач тем, читає production design tokens і дозволяє QA проводити візуальні перевірки.

### Підготовка до E2E smoke та QA
- Зібрані сценарії (login→dashboard, relations accept flow, create→reschedule→cancel lesson) та задокументовані в QA-нотатках.
- Проведено ручний аудит lessons-модуля (docs/qa/lessons_module_manual_qa.md) — чіткі кроки для перевірки UTC, ролей, локалізації та помилок.

## 2. Що залишилось поза релізом / перенесено
1. **Marketplace Upgrade (розділ 3 плану)**  
   - Централізований Pinia-кеш із ключем `marketplace:list:{filters_hash}` та TTL 10 хвилин не реалізовано.  
   - Інвалюдація кешу при зміні профілю/ціни/headline також відсутня.  
   - Unit-тести для marketplace (пагінація, сорти, offline) не створені.  
   - KPI по часі відповіді (≤120 ms) не заміряні.

2. **Theme QA аудит (розділ 4)**  
   - Формальний чекліст 15×3 компоненти не задокументовано.  
   - Немає скрінів `before/after` та статусів `pass/fail/note` у `/docs/ui/theme-audit/v0.9/`.  
   - Використано лише Dev Playground, але не оформлено звіт згідно шаблону.

3. **E2E Smoke Tests (розділ 6)**  
   - Структура Playwright-проєкту та конфіг для локалі/staging ще не закладені в репозиторії.  
   - Seed `seed_demo_v9` не інтегровано в e2e-скрипти.  
   - Фактичні тестові файли перенесені на v0.10, але підготовчої структури поки немає.

## 3. Пріоритети для v0.10
1. **Marketplace Performance & Cache**  
   - Реалізувати Pinia-кеш із TTL, інвалюдацією й unit-тестами.  
   - Додати вимірювання latency (Instrumentation + DevTools профайли) і зберігати результати в релізних нотатках.

2. **Theme QA Completion**  
   - Підготувати повний чекліст, скрінкасти для 15 компонентів × 3 теми, автоматизувати знімки через Dev Playground (можна зберігати у git LFS).  
   - Інтегрувати результати в `/docs/ui/theme-audit/v0.9/` та затвердити як базову процедуру для наступних релізів.

3. **E2E Smoke Infrastructure**  
   - Створити Playwright-проєкт із підтримкою локального та staging середовища, використовуючи seed `seed_demo_v9`.  
   - Зашити сценарії з вимог (student/tutor dashboards, relations accept flow, lessons create→reschedule→cancel) та підготувати CI-джоби, щоб у v0.10 можна було лише “ввімкнути” виконання.

4. **Lessons Module Evolution**  
   - Перейти з polling на WebSocket (заплановано бекендом) і додати дельта-оновлення без повного refetch.  
   - Розглянути оптимізацію FullCalendar render (наприклад, chunking подій) та покращити UX при великій кількості уроків.

5. **QA / i18n debt hunt**  
   - Пройтись warnings від intlify (відсутні ключі lessons.calendar.*) і закрити борги перед запуском Theme QA, щоб уникнути “ключових” текстів у проді.

---

_Документ підготовано для релізу v0.9.0 фронтенду. Наступний крок — затвердити backlog v0.10 згідно з пропозиціями вище._

## 4. Patch v0.9.1 — виконані доповнення

### 4.1. Relations Dashboard (п.1.1–1.3 плану)
- **Unit-тести `relationsStore`** покривають cursor pagination, `loadMore`, bulk accept/archive (успіх, partial failure, `noChanges`), фільтри статусів, transition invited→active→archived, offline/429/backend помилки та empty state @frontend/tests/relations/relationsStore.spec.js#120-220.
- **Component-тести `DashboardTutor.vue`** перевіряють таби, масові дії, статусні бейджі, error banners і інтеграцію зі стором @frontend/tests/modules/dashboard/DashboardTutor.spec.js#37-160.
- **Manual QA checklist** зібрано в `backend/docs/qa/relations_dashboard_manual_qa.md`, покриває всі переходи станів, reload-поведінку, локалізацію EN/UK, bulk сценарії та error стани @backend/docs/qa/relations_dashboard_manual_qa.md#1-81.

### 4.2. Lessons Module (п.2.1–2.3)
- Додано підтримку `series_id` у формі створення, модалі скасування та відображенні подій (data-tests для QA) @frontend/src/modules/lessons/views/LessonList.vue#180-399.
- `lessonStore` тепер нормалізує таймзону через профіль/авторизацію з fallback на `dayjs.tz.guess()` і має покриття unit-тестами для UTC↔local @frontend/src/modules/lessons/store/lessonStore.js#1-159 та @frontend/tests/lessons/lessonStore.spec.js#1-120.
- Написано edge-case тести для reschedule cancelled та overlapping уроків у `LessonList.spec.js` (випробувано помилки бекенду, revert поведінку FullCalendar) @frontend/tests/lessons/LessonList.spec.js#170-242.

### 4.3. i18n Cleanup (п.3)
- Зібрано всі попередження `intlify`, додано відсутні ключі для `lessons.calendar.series.*`, `relations.bulk.*`, timezone fallback та Dev Playground (EN+UK) @frontend/src/i18n/locales/en.json#380-436, @frontend/src/i18n/locales/uk.json#430-500.
- Консоль чиста — QA підтвердив відсутність `[intlify] Not found` під час ручних сценаріїв.

### 4.4. Dev Theme Playground (п.4)
- Впроваджено sidebar-навігацію, вирівняні заголовки, перевірку ролі (лише admin), блок Design Tokens Inspector та Intersection Observer для активних секцій @frontend/src/modules/dev/views/DevThemePlayground.vue#1-673.
- Додано відповідні локалізації й токенізовані підписи, щоб QA міг фіксувати зміни тем без ручних правок.

### 4.5. Загальний статус
- Усі вимоги `frontend09.1.md` виконано. Relations Dashboard відповідає бекенд-контракту як на рівні стору/компонентів, так і в QA-документації; уроки синхронізовані з BE v0.9.1; i18n та Dev Playground закривають борги 9.0.