# Dev Classroom Launcher

## –û–≥–ª—è–¥

Dev Classroom Launcher ‚Äî —Ü–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è classroom-—Å–µ—Å—ñ–π —É –ª–æ–∫–∞–ª—å–Ω–æ–º—É dev-–æ—Ç–æ—á–µ–Ω–Ω—ñ –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ —Ä—É—á–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤ —Ç–∞ URL.

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. –î–æ–¥–∞–π—Ç–µ feature flag —É `.env.local`:
```bash
VITE_DEV_CLASSROOM_LAUNCHER=true
```

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å dev-—Å–µ—Ä–≤–µ—Ä:
```bash
npm run dev
```

### –î–æ—Å—Ç—É–ø

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∑–∞ –∞–¥—Ä–µ—Å–æ—é:
```
http://localhost:5173/dev/classroom
```

**–í–∏–º–æ–≥–∏:**
- –í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ
- –í–∞—à –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ `is_staff = True`
- Feature flag `VITE_DEV_CLASSROOM_LAUNCHER` –º–∞—î –±—É—Ç–∏ —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π

### –§—É–Ω–∫—Ü—ñ—ó

#### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó —Å–µ—Å—ñ—ó
1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **"–°—Ç–≤–æ—Ä–∏—Ç–∏ —ñ –ø—Ä–∏—î–¥–Ω–∞—Ç–∏—Å—è"**
2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
   - –°—Ç–≤–æ—Ä–∏—Ç—å classroom session –∑ `is_dev=true`
   - –°—Ç–≤–æ—Ä–∏—Ç—å whiteboard workspace
   - –û—Ç—Ä–∏–º–∞—î join token
   - –ó–±–µ—Ä–µ–∂–µ token —É sessionStorage
   - –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤–∞—Å —É `/classroom/:sessionId`

#### –ü—Ä–∏—î–¥–Ω–∞–Ω–Ω—è –¥–æ —ñ—Å–Ω—É—é—á–æ—ó —Å–µ—Å—ñ—ó
1. –£ —Å–ø–∏—Å–∫—É "–û—Å—Ç–∞–Ω–Ω—ñ dev-—Å–µ—Å—ñ—ó" –∑–Ω–∞–π–¥—ñ—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω—É —Å–µ—Å—ñ—é
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **"–ü—Ä–∏—î–¥–Ω–∞—Ç–∏—Å—è"**
3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç—Ä–∏–º–∞—î token —Ç–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –≤–∞—Å

#### –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è ID —Å–µ—Å—ñ—ó
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —ñ–∫–æ–Ω–∫—É üìã –±—ñ–ª—è —Å–µ—Å—ñ—ó
- ID –±—É–¥–µ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ —É –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É

#### –ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ—ó
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —ñ–∫–æ–Ω–∫—É üóÑÔ∏è –±—ñ–ª—è —Å–µ—Å—ñ—ó
- –°–µ—Å—ñ—è –±—É–¥–µ –ø–æ–º—ñ—á–µ–Ω–∞ —è–∫ –∞—Ä—Ö—ñ–≤–æ–≤–∞–Ω–∞ —Ç–∞ –∑–Ω–∏–∫–Ω–µ –∑—ñ —Å–ø–∏—Å–∫—É –∞–∫—Ç–∏–≤–Ω–∏—Ö

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### Frontend

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**
- `DevClassroomLauncher.vue` ‚Äî –≥–æ–ª–æ–≤–Ω–∏–π UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `useDevClassroomLauncher.ts` ‚Äî composable –¥–ª—è API –≤–∑–∞—î–º–æ–¥—ñ—ó

**API endpoints:**
- `GET /api/v1/dev/classroom/sessions/?limit=10` ‚Äî —Å–ø–∏—Å–æ–∫ dev-—Å–µ—Å—ñ–π
- `POST /api/v1/dev/classroom/sessions/` ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è dev-—Å–µ—Å—ñ—ó
- `POST /api/v1/classroom/session/:id/join/` ‚Äî –æ—Ç—Ä–∏–º–∞–Ω–Ω—è join token
- `PATCH /api/v1/dev/classroom/sessions/:id/archive/` ‚Äî –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ—ó

**Token management:**
- –¢–æ–∫–µ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É `sessionStorage` –∑ –∫–ª—é—á–µ–º `devLauncherClassroomToken:<sessionId>`
- –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ handshake —É ClassroomWhiteboardHost —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è

### Backend

**Models:**
- `ClassroomSession.is_dev` ‚Äî –º–∞—Ä–∫–µ—Ä dev-—Å–µ—Å—ñ—ó
- `ClassroomSession.origin` ‚Äî –¥–∂–µ—Ä–µ–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è (`dev_launcher`)
- `ClassroomSession.is_archived` ‚Äî —Å—Ç–∞—Ç—É—Å –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—ó
- `ClassroomSession.created_by` ‚Äî –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, —â–æ —Å—Ç–≤–æ—Ä–∏–≤ —Å–µ—Å—ñ—é

**Security:**
- Endpoints –¥–æ—Å—Ç—É–ø–Ω—ñ –ª–∏—à–µ –∫–æ–ª–∏:
  - `settings.ENVIRONMENT == 'dev'` –∞–±–æ `DEBUG == True`
  - `settings.ENABLE_DEV_CLASSROOM == True`
  - `request.user.is_staff == True`
- –£ production –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è 404 (–Ω–µ 403) –¥–ª—è –ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è —ñ—Å–Ω—É–≤–∞–Ω–Ω—è endpoint

**Cleanup:**
- TTL job –≤–∏–¥–∞–ª—è—î –∞—Ä—Ö—ñ–≤–æ–≤–∞–Ω—ñ dev-—Å–µ—Å—ñ—ó —Å—Ç–∞—Ä—à—ñ –∑–∞ 14 –¥–Ω—ñ–≤
- Management command: `python manage.py cleanup_dev_sessions --days=14`

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### Unit —Ç–µ—Å—Ç–∏
```bash
# Frontend
npm run test:unit -- useDevClassroomLauncher.spec.ts

# Backend
cd backend
source .venv/bin/activate  # –∞–±–æ .venv\Scripts\activate –Ω–∞ Windows
python manage.py test apps.classroom.tests.test_dev_views
```

### E2E —Ç–µ—Å—Ç–∏
```bash
npm run test:e2e -- dev-classroom-launcher.spec.ts
```

## Troubleshooting

### –ü–æ–º–∏–ª–∫–∞ 403 Forbidden
**–ü—Ä–∏—á–∏–Ω–∞:** –í–∞—à –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º–∞—î `is_staff = True` –∞–±–æ feature flag –≤–∏–º–∫–Ω–µ–Ω–∏–π

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `.env.local`: `VITE_DEV_CLASSROOM_LAUNCHER=true`
2. –£ Django admin –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å `is_staff = True` –¥–ª—è –≤–∞—à–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å dev-—Å–µ—Ä–≤–µ—Ä

### –ü–æ–º–∏–ª–∫–∞ "Session not found"
**–ü—Ä–∏—á–∏–Ω–∞:** Backend –Ω–µ —Å—Ç–≤–æ—Ä–∏–≤ —Å–µ—Å—ñ—é –∞–±–æ workspace

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ backend logs
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ: `python manage.py migrate`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `ENABLE_DEV_CLASSROOM = True` —É Django settings

### Token –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** sessionStorage –±–ª–æ–∫—É—î—Ç—å—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ console —É DevTools –Ω–∞ –ø–æ–º–∏–ª–∫–∏
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ cookies —Ç–∞ storage –Ω–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ
3. –°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–∏–π –±—Ä–∞—É–∑–µ—Ä

## –û–±–º–µ–∂–µ–Ω–Ω—è

- **DEV only:** –ù–µ –ø—Ä–∞—Ü—é—î —É production (–Ω–∞–≤–º–∏—Å–Ω–æ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ)
- **Staff only:** –î–æ—Å—Ç—É–ø–Ω–æ –ª–∏—à–µ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ `is_staff = True`
- **Limit:** –ú–∞–∫—Å–∏–º—É–º 50 —Å–µ—Å—ñ–π —É —Å–ø–∏—Å–∫—É (–ø–∞—Ä–∞–º–µ—Ç—Ä `?limit=50`)
- **TTL:** –ê—Ä—Ö—ñ–≤–æ–≤–∞–Ω—ñ —Å–µ—Å—ñ—ó –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è —á–µ—Ä–µ–∑ 14 –¥–Ω—ñ–≤

## Roadmap

- [ ] –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è (–∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–æ—Ä—ñ–Ω–æ–∫, template)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞
- [ ] –ï–∫—Å–ø–æ—Ä—Ç/—ñ–º–ø–æ—Ä—Ç dev-—Å–µ—Å—ñ–π
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Solo workspace

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è

- [–ü–ª–∞–Ω v0.91.0](../../backend/docs/plan/v0.91.0/PLAN_DEV_CLASSROOM_LAUNCHER.md)
- [Operational Guide](../../backend/docs/plan/v0.91.0/OPERATIONAL_GUIDE.md)
- [Whiteboard Vertical Layout Plan](../../backend/docs/plan/v0.90.0/PLAN_90_WHITEBOARD_VERTICAL_LAYOUT.md)
