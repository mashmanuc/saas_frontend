import fs from 'node:fs'
import path from 'node:path'

const translations = [
  ['availability.nextSlots', 'Upcoming slots'],
  ['availability.pendingChanges', '{count} changes waiting for sync'],
  ['availability.preview', 'Preview'],
  ['availability.showPreview', 'Show preview'],
  ['availability.slotEditor.batchError', 'Batch update failed'],
  ['availability.slotEditor.batchPartialSuccess', '{success} slots updated, errors: {error}'],
  ['availability.slotEditor.batchSuccess', 'All slots updated successfully'],
  ['availability.slotEditor.conflictError', 'Conflict detected. Please resolve before saving.'],
  ['availability.slotEditor.conflictPersists', 'Conflict persists. Reload the page and try again.'],
  ['availability.slotEditor.delete', 'Delete'],
  ['availability.slotEditor.deleteConfirm', 'Are you sure you want to delete this slot?'],
  ['availability.slotEditor.deleteError', 'Failed to delete slot'],
  ['availability.slotEditor.deleteSuccess', 'Slot deleted successfully'],
  ['availability.slotEditor.errors.endBeforeStart', 'End time must be after start time'],
  ['availability.slotEditor.overrideReason', 'Override reason'],
  ['availability.slotEditor.overrideReasonPlaceholder', 'Optional: explain why you are modifying this slot...'],
  ['availability.slotEditor.saveError', 'Failed to save slot'],
  ['availability.slotEditor.saveSuccess', 'Slot saved successfully'],
  ['availability.slotEditor.saving', 'Saving...'],
  ['availability.slotEditor.strategies.override.description', 'Change this slot despite conflicts'],
  ['availability.slotEditor.strategies.override.title', 'Override'],
  ['availability.slotEditor.strategies.templateUpdate.description', 'Update the availability template for future slots'],
  ['availability.slotEditor.strategies.templateUpdate.title', 'Update template'],
  ['availability.slotEditor.strategies.userChoice.description', 'Ask me how to resolve conflicts'],
  ['availability.slotEditor.strategies.userChoice.title', 'User choice'],
  ['availability.slotEditor.strategy', 'Edit strategy'],
  ['availability.slotEditor.timeRange', 'Time range'],
  ['availability.slotEditor.title', 'Edit slot'],
  ['availability.slotsGenerated', 'Slots generated successfully'],
  ['availability.status.available', 'Available'],
  ['availability.status.blocked', 'Blocked'],
  ['availability.status.booked', 'Booked'],
  ['availability.templateApplied', 'Template applied. Slots will be generated in ~{eta} min'],
  ['availability.upcomingSlots', 'Upcoming slots'],
  ['availability.validation.endAfterStart', 'End time must be later than start time'],
  ['availability.validation.maxDuration3Hours', 'Slot duration is limited to 3 hours'],
  ['availability.validation.slotAlreadyExists', 'A slot already exists for this time'],
  ['availability.validation.slotOverlapsWithEvent', 'Slot overlaps with an existing event'],
  ['availability.weeklyHours', 'Weekly hours'],
  ['availability.weeklyTemplate', 'Weekly template'],
  ['booking.actions.blockTime', 'Block time'],
  ['booking.actions.bookLesson', 'Schedule lesson'],
  ['booking.actions.cancelLesson', 'Cancel lesson'],
  ['booking.actions.clearAvailability', 'Clear availability'],
  ['booking.actions.makeAvailable', 'Make available'],
  ['booking.actions.viewDetails', 'View details'],
  ['booking.bookLesson', 'Book a lesson'],
  ['booking.calendar.errors.cannotDeletePaid', 'Paid lessons cannot be deleted'],
  ['booking.calendar.errors.cannotDeletePast', 'Past lessons cannot be deleted'],
  ['booking.calendar.errors.invalidDuration', 'Invalid lesson duration'],
  ['booking.calendar.errors.invalidOrder', 'Invalid order'],
  ['booking.calendar.errors.invalidTime', 'Time must be in the future (max 6 months ahead)'],
  ['booking.calendar.errors.notFound', 'Lesson not found'],
  ['booking.calendar.errors.permissionDenied', 'You do not have permission for this action'],
  ['booking.calendar.errors.rateLimitExceeded', 'Too many requests. Try again later'],
  ['booking.calendar.errors.serverError', 'Server error. Please try again'],
  ['booking.calendar.errors.timeOverlap', 'This time overlaps with another lesson'],
  ['booking.calendar.errors.unknown', 'Unknown error'],
  ['booking.calendar.errors.validationError', 'Validation error'],
  ['booking.calendar.noSchedule', 'Schedule not configured'],
  ['booking.calendar.noScheduleDesc', 'Create an availability template so students can book lessons'],
  ['booking.calendar.setupSchedule', 'Set up schedule'],
  ['booking.calendar.success.bulkUpdateCompleted', '{count} lessons updated'],
  ['booking.calendar.success.eventCreated', 'Lesson created'],
  ['booking.calendar.success.eventDeleted', 'Lesson deleted'],
  ['booking.calendar.success.eventUpdated', 'Lesson updated'],
  ['booking.calendar.warnings.bulkUpdatePartial', '{failed} lessons failed to update'],
  ['booking.calendar.warnings.disconnected', 'Connection lost. Reconnecting...'],
  ['booking.conflict.body', 'This time was just booked by another student. Please choose another slot.'],
  ['booking.conflict.selectAnother', 'Select another time'],
  ['booking.conflict.title', 'Slot already booked'],
  ['booking.draft.applyOnce', 'Apply once'],
  ['booking.draft.changesCount', '{count} changes'],
  ['booking.draft.pendingChanges', 'unsaved changes'],
  ['booking.draft.saveAsTemplate', 'Save as template'],
  ['booking.dst.transitionWarning', 'Heads up: daylight saving shift on {date}'],
  ['booking.errors.generic', 'Could not book the lesson. Please try again.'],
  ['booking.errors.matchNotAccepted', 'Accept the tutor invitation first'],
  ['booking.errors.slotUnavailable', 'Slot already booked. Please pick another one.'],
  ['booking.manualBooking.createLesson', 'Create lesson'],
  ['booking.manualBooking.duration', 'Duration'],
  ['booking.manualBooking.noStudentsFound', 'No students found'],
  ['booking.manualBooking.notes', 'Notes'],
  ['booking.manualBooking.notesPlaceholder', 'Additional info about the lesson...'],
  ['booking.manualBooking.recentStudents', 'Recent students'],
  ['booking.manualBooking.searchStudent', 'Search student...'],
  ['booking.manualBooking.startTime', 'Start time'],
  ['booking.manualBooking.student', 'Student'],
  ['booking.manualBooking.title', 'Create lesson manually'],
  ['booking.modal.date', 'Date'],
  ['booking.modal.noteTooLong', 'Note is too long (max 500 characters)'],
  ['booking.modal.selectSubject', 'Select subject'],
  ['booking.modal.subject', 'Subject'],
  ['booking.modal.subjectRequired', 'Subject is required'],
  ['booking.modal.time', 'Time'],
  ['booking.modal.tutor', 'Tutor'],
  ['booking.request.duration', 'Duration'],
  ['booking.request.message', 'Message to tutor'],
  ['booking.request.messagePlaceholder', 'Describe what you want to learn...'],
  ['booking.request.send', 'Send request'],
  ['booking.request.title', 'Booking request'],
  ['calendar.draft.useMergeDescription', 'Try to merge both versions automatically.'],
  ['calendar.draft.useServer', 'Use server version'],
  ['calendar.draft.useServerDescription', 'Discard local changes and load the server version.'],
  ['calendar.errors.createProfile', 'Failed to create profile.'],
  ['calendar.errors.forbidden', 'Access forbidden.'],
  ['calendar.errors.loadProfile', 'Unable to load tutor profile.'],
  ['calendar.errors.loadTutors', 'Unable to load tutors.'],
  ['calendar.errors.payloadTooLarge', 'Payload is too large. Reduce the size and try again.'],
  ['calendar.errors.publishProfile', 'Failed to publish profile.'],
  ['calendar.errors.rateLimited', 'Too many requests. Please try again later.'],
  ['calendar.errors.serverError', 'Server error. Please try again.'],
  ['calendar.errors.slotConflict', 'Slot already taken. Pick another time.'],
  ['calendar.errors.submitForReview', 'Failed to submit profile for review.'],
  ['calendar.errors.unpublishProfile', 'Failed to unpublish profile.'],
  ['calendar.errors.updateProfile', 'Failed to save profile.'],
  ['calendar.errors.validation', 'Check the entered data.'],
  ['calendar.errorsNew.unknown', 'An unknown error occurred. Try again later.'],
  ['calendar.filters.allCountries', 'All countries'],
  ['calendar.filters.any', 'Any'],
  ['calendar.filters.cacheExpiredDays', 'Updated {count} days ago'],
  ['calendar.filters.cacheExpiredHours', 'Updated {count} hours ago'],
  ['calendar.filters.cacheExpiredJustNow', 'Just updated'],
  ['calendar.filters.cacheExpiredMinutes', 'Updated {count} minutes ago'],
  ['calendar.filters.cacheExpiredTitle', 'Filter data is outdated'],
  ['calendar.filters.category', 'Category'],
  ['calendar.filters.clear', 'Clear'],
  ['calendar.filters.clearAll', 'Clear all'],
  ['calendar.filters.country', 'Country'],
  ['calendar.filters.direction', 'Track'],
  ['calendar.filters.directionDpa', 'DPA prep'],
  ['calendar.filters.directionNmt', 'NMT prep'],
  ['calendar.filters.experience', 'Experience (years)'],
  ['calendar.filters.experienceMax', 'Experience up to (years)'],
  ['calendar.filters.experienceMaxPlaceholder', 'e.g. 10'],
  ['calendar.filters.experiencePlaceholder', 'e.g. 3'],
  ['calendar.filters.format', 'Format'],
  ['calendar.filters.formatHybrid', 'Hybrid'],
  ['calendar.filters.formatOffline', 'Offline'],
  ['calendar.filters.formatOnline', 'Online'],
  ['calendar.filters.hasCertifications', 'Has certifications'],
  ['calendar.filters.hasVideo', 'Has intro video'],
  ['calendar.filters.language', 'Language'],
  ['calendar.filters.languages', 'Languages'],
  ['calendar.filters.max', 'Max'],
  ['calendar.filters.min', 'Min'],
  ['calendar.filters.price', 'Price'],
  ['calendar.filters.priceRange', '{min} – {max}'],
  ['calendar.filters.priceRangeLabel', 'Price range'],
  ['calendar.filters.rating', 'Rating'],
  ['calendar.filters.ratingMin', 'from {rating}+'],
  ['calendar.filters.refresh', 'Refresh'],
  ['calendar.filters.search', 'Search'],
  ['calendar.filters.searchPlaceholder', 'Type at least 2 characters'],
  ['calendar.filters.subject', 'Subject'],
  ['calendar.filters.subjects', 'Subjects'],
  ['calendar.filters.timezone', 'Timezone'],
  ['calendar.filters.timezonePlaceholder', 'e.g. Europe/Kyiv'],
  ['calendar.filters.title', 'Filters'],
  ['calendar.filters.today', 'Today'],
  ['calendar.filters.verified', 'Verified'],
  ['calendar.filters.verifiedOnly', 'Verified only'],
  ['calendar.filters.video', 'Video'],
  ['calendar.footer.copied', 'Copied!'],
  ['calendar.footer.copy', 'Copy'],
  ['calendar.footer.your_lesson_link', 'Your lesson link'],
  ['calendar.guide.availableSlot', 'Available slot'],
  ['calendar.guide.blockedSlot', 'Blocked slot'],
  ['calendar.guide.bookedLesson', 'Booked lesson'],
  ['calendar.guide.checkboxAvailability', 'Show or hide availability slots'],
  ['calendar.guide.checkboxLessons', 'Show or hide booked lessons'],
  ['calendar.guide.checkboxes', 'Checkbox filters'],
  ['calendar.guide.colors', 'Color legend'],
  ['calendar.guide.createSlotDesc', 'Click “Add slot” or drag on the grid to make time available for students.'],
  ['calendar.guide.editSlotDesc', 'Select any slot to adjust its time or duration. Use the control panel for batch edits.'],
  ['calendar.guide.helpIcon', 'Need help?'],
  ['calendar.guide.helpIconDesc', 'Click the “?” icon in the top bar to open the guide or contact support.'],
  ['calendar.guide.howToCreate', 'How to create a slot'],
  ['calendar.guide.howToEdit', 'How to edit a slot'],
  ['calendar.guide.intro', 'Everything you need to manage availability and lessons in one place.'],
  ['calendar.guide.limits', 'Limits & tips'],
  ['calendar.guide.maxDuration', 'Slots longer than 3 hours may be split for readability.'],
  ['calendar.guide.navigation', 'Navigation'],
  ['calendar.guide.navigationDesc', 'Use arrows or hotkeys to switch weeks. “Today” jumps to the current week.'],
  ['calendar.guide.noDuplicates', 'Avoid overlapping slots to keep the calendar clear.'],
  ['calendar.guide.noOverlap', 'Lesson and availability overlaps are blocked automatically.'],
  ['calendar.guide.setupButton', 'Setup button'],
  ['calendar.guide.setupButtonDesc', '“Set hours” opens the availability editor with full schedule control.'],
  ['calendar.guide.title', 'Calendar guide'],
  ['calendar.header.color_legend', 'Color legend'],
  ['calendar.header.mark_free_time', 'Mark free time'],
  ['calendar.header.reminder', 'Keep your calendar updated so students can book lessons.'],
  ['calendar.header.video_guide', 'Video guide'],
  ['calendar.hoursLabel', '{hours} hours'],
  ['calendar.legend.blocked_time', 'Blocked time'],
  ['calendar.legend.first_lesson', 'First lesson'],
  ['calendar.legend.no_show', 'No-show'],
  ['calendar.legend.past_time', 'Past time'],
  ['calendar.legend.regular_lesson', 'Regular lesson'],
  ['calendar.legend.title', 'Legend'],
  ['calendar.loading', 'Loading...'],
  ['calendar.profile.editor.timezonePlaceholder', 'e.g. Europe/Kyiv'],
  ['calendar.profile.editor.trialPriceHint', 'Optional discounted price for the first lesson'],
  ['calendar.profile.editor.trialPriceLabel', 'Trial lesson price'],
  ['calendar.profile.editor.trialPricePlaceholder', 'Leave blank if not needed'],
  ['calendar.profile.editor.uploadPhoto', 'Upload photo'],
  ['calendar.profile.editor.validation.bio', 'Bio is required (min 10 characters).'],
  ['calendar.profile.editor.validation.headline', 'Headline is required (min 3 characters).'],
  ['calendar.profile.editor.validation.hourlyRate', 'Hourly rate must be greater than 0.'],
  ['calendar.profile.editor.validation.languages', 'Select at least one language.'],
  ['calendar.profile.editor.validation.subjects', 'Select at least one subject.'],
  ['calendar.profile.editor.videoHint', 'Link to YouTube or Vimeo'],
  ['calendar.profile.editor.videoTitle', 'Intro video'],
  ['calendar.profile.editor.videoUrlLabel', 'Video link'],
  ['calendar.profile.editor.videoUrlPlaceholder', 'https://youtube.com/watch?v=...'],
  ['calendar.profile.education.in', 'in'],
  ['calendar.profile.education.present', 'Present'],
  ['calendar.profile.education.title', 'Education'],
  ['calendar.profile.fullCalendar', 'Full calendar'],
  ['calendar.profile.inDays', 'in {count} days'],
  ['calendar.profile.inHours', 'in {count} hours'],
  ['calendar.profile.inMinutes', 'in {count} minutes'],
  ['calendar.profile.incompleteDescription', 'Fill avatar, bio, subjects, languages, and rate.'],
  ['calendar.profile.incompleteTitle', 'Profile not ready yet'],
  ['calendar.profile.loadError', 'Failed to load availability'],
  ['calendar.profile.nextAvailable', 'Next available time'],
  ['calendar.profile.nextSlots', 'Next slots'],
  ['calendar.profile.noAvailability', 'No availability'],
  ['calendar.profile.noSlotsAvailable', 'No slots available'],
  ['calendar.profile.noUpcomingSlots', 'No upcoming slots'],
  ['calendar.profile.notFound.backCta', 'Back to catalog'],
  ['calendar.profile.notFound.description', 'Tutor profile does not exist or was removed.'],
  ['calendar.profile.notFound.title', 'Tutor not found'],
  ['calendar.profile.publish', 'Publish'],
  ['calendar.profile.publishError', 'Failed to publish profile.'],
  ['calendar.profile.publishSuccess', 'Profile published.'],
  ['calendar.profile.publishing', 'Publishing...'],
  ['calendar.profile.reviews.empty', 'No reviews yet'],
  ['calendar.profile.reviews.loadError', 'Failed to load reviews'],
  ['calendar.profile.reviews.loadMore', 'Load more'],
  ['calendar.profile.reviews.rating', 'Rating'],
  ['calendar.profile.reviews.ratingLabel', 'Rating'],
  ['calendar.profile.reviews.review', 'Review'],
  ['calendar.profile.reviews.reviewsCount', '{count} reviews'],
  ['calendar.profile.reviews.reviewsEmpty', 'No reviews yet'],
  ['calendar.profile.reviews.reviewsLabel', 'Reviews'],
  ['calendar.profile.reviews.reviewsLoadError', 'Failed to load reviews'],
  ['calendar.profile.reviews.reviewsLoadMore', 'Load more'],
  ['calendar.profile.reviews.title', 'Reviews'],
  ['calendar.profile.reviews.write.ratingLabel', 'Rating'],
  ['calendar.profile.reviews.write.sendError', 'Failed to submit review.'],
  ['calendar.profile.reviews.write.submit', 'Submit'],
  ['calendar.profile.reviews.write.success', 'Review submitted'],
  ['calendar.profile.reviews.write.textLabel', 'Review'],
  ['calendar.profile.reviews.write.textPlaceholder', 'Describe your learning experience...'],
  ['calendar.profile.reviews.write.title', 'Leave a review'],
  ['calendar.profile.reviews.write.validation', 'Please check the entered data.'],
  ['calendar.profile.stats.lessons', 'lessons'],
  ['calendar.profile.stats.students', 'students'],
  ['calendar.profile.status.approved', 'Approved'],
  ['calendar.profile.status.draft', 'Draft'],
  ['calendar.profile.status.pending_review', 'Under review'],
  ['calendar.profile.status.rejected', 'Rejected'],
  ['calendar.profile.status.suspended', 'Suspended'],
  ['calendar.profile.subjectLevel.advanced', 'Advanced'],
  ['calendar.profile.subjectLevel.beginner', 'Beginner'],
  ['calendar.profile.subjectLevel.expert', 'Expert'],
  ['calendar.profile.subjectLevel.intermediate', 'Intermediate'],
  ['calendar.profile.subjectsTitle', 'Subjects'],
  ['calendar.profile.submit', 'Submit for review'],
  ['calendar.profile.submitError', 'Failed to submit profile for review.'],
  ['calendar.profile.submitSuccess', 'Profile sent for review.'],
  ['calendar.profile.submitting', 'Submitting for review...'],
  ['calendar.profile.title', 'Tutor profile'],
  ['calendar.profile.today', 'Today'],
  ['calendar.profile.tomorrow', 'Tomorrow'],
  ['calendar.profile.unpublish', 'Unpublish'],
  ['calendar.profile.unpublishError', 'Failed to unpublish profile.'],
  ['calendar.profile.unpublishSuccess', 'Profile unpublished.'],
  ['calendar.profile.unpublishing', 'Unpublishing...'],
  ['calendar.profile.upcomingSlots', 'Upcoming slots'],
  ['calendar.profile.validationTitle', 'Needs attention:'],
  ['calendar.profile.viewCalendar', 'View calendar'],
  ['calendar.profile.viewFullCalendar', 'View full calendar'],
  ['calendar.profile.viewPublic', 'View public profile'],
  ['calendar.profile.watchIntro', 'Watch intro'],
  ['calendar.profile.weeklyHours', 'Hours per week'],
  ['calendar.retry', 'Retry'],
  ['calendar.search.placeholder', 'Search tutors, subjects...'],
  ['calendar.search.pressEnter', 'Press Enter to search for "{query}"'],
  ['calendar.search.recentTitle', 'Recent searches'],
  ['calendar.search.resultsCount', '{count} found'],
  ['calendar.search.showResults', 'Show results ({count})'],
  ['calendar.search.suggestionsTitle', 'Suggestions'],
  ['calendar.search.tutorsPlural', 'tutors'],
  ['calendar.sections.featured', 'Featured tutors'],
  ['calendar.sections.loadError', 'Failed to load tutors'],
  ['calendar.sections.new', 'New tutors'],
  ['calendar.sections.popular', 'Popular tutors'],
  ['calendar.sections.recommended', 'Recommended for you'],
  ['calendar.sections.viewAll', 'View all'],
  ['calendar.subjects.available', '{count} tutors available'],
  ['profile.security.mfa.copyManualCode', 'Copy setup code'],
  ['profile.security.mfa.manualCodeCopied', 'Setup code copied'],
  ['profile.security.mfa.manualCodeLabel', 'Manual setup code'],
  ['profile.security.mfa.viewManualCode', 'View manual code']
]

const localesDir = path.join(process.cwd(), 'src', 'i18n', 'locales')
const enPath = path.join(localesDir, 'en.json')
const enData = JSON.parse(fs.readFileSync(enPath, 'utf-8'))

function setValue(obj, keyPath, value) {
  const parts = keyPath.split('.')
  let cursor = obj
  for (let i = 0; i < parts.length; i += 1) {
    const part = parts[i]
    if (i === parts.length - 1) {
      cursor[part] = value
      return
    }
    if (!cursor[part] || typeof cursor[part] !== 'object') {
      cursor[part] = {}
    }
    cursor = cursor[part]
  }
}

for (const [key, value] of translations) {
  setValue(enData, key, value)
}

fs.writeFileSync(enPath, JSON.stringify(enData, null, 2) + '\n')
console.log(`[apply-en-final-batch] Updated ${translations.length} keys in en.json`)
